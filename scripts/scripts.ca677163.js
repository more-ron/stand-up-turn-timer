"use strict";angular.module("standUpTurnTimerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){ich.refresh(),a.when("/",{template:ich["main-view"],controller:"MainCtrl"}).when("/about",{template:ich["about-view"],controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("standUpTurnTimerApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("standUpTurnTimerApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],function(a){function b(){gapi.hangout.onApiReady.add(function(b){b.isApiReady&&(i=gapi.hangout.layout.getVideoCanvas(),f=a("#tabs"),a(document).tooltip(),f.tabs(),i.setVisible(!0),d(),a(window).resize(d),window.standUpTimer.init())})}var c,d,e,f,g,h,i,j,k;d=function(){e&&clearTimeout(e),e=setTimeout(function(){c=a("body").width(),h=1/3*c,j=h+10,k=c-h-20,i.setPosition(j,10),i.setWidth(k),g=k/i.getAspectRatio()+10,f.css("width",""+parseInt(h)+"px").css("height",""+parseInt(g)+"px"),e=!1},24)},gadgets.util.registerOnLoadHandler(b)}(jQuery)}]),function(a){function b(){var b=c(this);return isNaN(b.duration)||a(this).text(d.inWords(b.duration)),this}function c(b){if(b=a(b),!b.data("duration")){b.data("duration",{duration:d.getDuration(b)});var c=a.trim(b.text());c.length>0&&b.attr("title",c)}return b.data("duration")}var d=function(a){return d.inWords(a)},e=function(a){return 0>a?Math.ceil(a):Math.floor(a)},f=function(a,b){return b?a.replace(/%d/i,b)+(b>1||-1>b?"s":"")+" ":""};a.duration=d,a.extend(d,{settings:{refreshMillis:6e4,disableMillisecondsDisplay:!1,strings:{milliseconds:"%d millisecond",seconds:"%d second",minutes:"%d minute",hours:"%d hour",days:"%d day",months:"%d month",years:"%d year"}},inWords:function(b){var c=this.settings.strings,d=e(this.settings.disableMillisecondsDisplay?0:b%1e3),g=e(b/1e3%60),h=e(b/6e4%60),i=e(b/36e5%24),j=e(b/864e5%30),k=e(b/2592e6%12),l=e(b/31104e6);return a.trim(f(c.years,l)+f(c.months,k)+f(c.days,j)+f(c.hours,i)+f(c.minutes,h)+f(c.seconds,g)+f(c.milliseconds,d))},getDuration:function(b){var c="duration"===a(b).get(0).tagName.toLowerCase();return a(b).attr(c?"duration":"title")}}),a.fn.duration=function(){var a=this;a.each(b);var c=d.settings;return c.refreshMillis>0&&setInterval(function(){a.each(b)},c.refreshMillis),a}}(jQuery),window.standUpTimer=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r=15,s=90,t=function(){return(new Date).getTime()},u=gapi.hangout.data,v=gapi.hangout.layout,w={expectedTotal:function(){return j(parseFloat(q.speakerLimitInput.val()))},timediff:function(){return t()-a},remaining:function(){return this.expectedTotal()-this.timediff()},percentage:function(){return this.remaining()/this.expectedTotal()*100}};return $.duration.settings.disableMillisecondsDisplay=!0,i=function(a){a.state.speakerTimerClickedAt&&p(parseInt(a.state.speakerTimerClickedAt))},c=function(a){if(!v.hasNotice())switch(a){case"speakerAlertOvertime":v.displayNotice("Time's up! Please give the floor to the next speaker.",!1);break;case"speakerRemindRemainingTime":v.displayNotice("Remaining time: "+$.duration(w.remaining()),!1)}},b=function(a){c(a.message)},p=function(b){var c=u.getState();a=b,d=c.meetingStartTime?parseInt(c.meetingStartTime):a,q.meetingLimitInput.val()!=c.meetingLimitInputVal&&q.meetingLimitInput.val(c.meetingLimitInputVal),q.speakerLimitInput.val()!=c.speakerLimitInputVal&&q.meetingLimitInput.val(c.speakerLimitInputVal),e||(e=setInterval(l,1e3)),k||(k=setInterval(n,1e3))},l=function(){var a=h(parseFloat(q.meetingLimitInput.val())),b=t()-d,c=a-b,e=c/a*100;q.meetingTimerDisplay.text($.duration(b)),q.meetingCountdownDisplay.text($.duration(c)),q.meetingProgressbar.progressbar({value:e})},n=function(){w.remaining()>-5e3&&w.remaining()<0&&(c("speakerAlertOvertime"),u.sendMessage("speakerAlertOvertime")),q.speakerTimerDisplay.text($.duration(w.timediff())),q.speakerCountdownDisplay.text($.duration(w.remaining())),q.speakerProgressbar.progressbar({value:w.percentage()})},q.init=function(){return q.meetingCountdownDisplay||q.setMeetingCountdownDisplay($(".meeting-countdown-display")),q.meetingLimitInput||q.setMeetingLimitInput($("#meeting-limit-input")),q.meetingProgressbar||q.setMeetingProgressbar($(".meeting-progressbar")),q.meetingTimerDisplay||q.setMeetingTimerDisplay($(".meeting-timer-display")),q.speakerCountdownDisplay||q.setSpeakerCountdownDisplay($(".speaker-countdown-display")),q.speakerLimitInput||q.setSpeakerLimitInput($("#speaker-limit-input")),q.speakerProgressbar||q.setSpeakerProgressbar($(".speaker-progressbar")),q.speakerTimerDisplay||q.setSpeakerTimerDisplay($(".speaker-timer-display")),q.speakerTimerButton||q.setSpeakerTimerButton($(".speaker-timer-button")),q.resetTimerButton||q.setResetTimerButton($(".reset-timer-button")),q.speakerRemainingTimeReminderButton||q.setSpeakerRemainingTimeReminderButton($(".speaker-remaining-time-reminder-button")),m(),o(),u.onStateChanged.add(i),u.onMessageReceived.add(b),q},q.setSpeakerTimerButton=function(a){var b;return q.speakerTimerButton=a,a.on("click",function(){b=t(),p(b),u.getValue("meetingStartTime")||u.setValue("meetingStartTime",""+b),u.setValue("speakerTimerClickedAt",""+b)}),q},q.setResetTimerButton=function(a){var b;return q.resetTimerButton=a,a.on("click",function(){b=t(),p(b),d=b,u.setValue("meetingStartTime",""+b),u.setValue("speakerTimerClickedAt",""+b)}),q},q.setSpeakerRemainingTimeReminderButton=function(a){q.speakerRemainingTimeReminderButton=a,a.on("click",function(){c("speakerRemindRemainingTime"),u.sendMessage("speakerRemindRemainingTime")})},q.setMeetingCountdownDisplay=function(a){return q.meetingCountdownDisplay=a,q},m=function(){u.setValue("meetingLimitInputVal",q.meetingLimitInput.val())},q.setMeetingLimitInput=function(a){return q.meetingLimitInput=a,q.meetingLimitInput.val(r).on("change",m).spinner(),q},q.setMeetingProgressbar=function(a){return q.meetingProgressbar=a,q.meetingProgressbar.progressbar(),q},q.setMeetingTimerDisplay=function(a){return q.meetingTimerDisplay=a,q},q.setSpeakerCountdownDisplay=function(a){return q.speakerCountdownDisplay=a,q},o=function(){u.setValue("speakerLimitInputVal",q.speakerLimitInput.val())},q.setSpeakerLimitInput=function(a){return q.speakerLimitInput=a,q.speakerLimitInput.val(s).on("change",o).spinner(),q},q.setSpeakerProgressbar=function(a){return q.speakerProgressbar=a,q.speakerProgressbar.progressbar(),q},q.setSpeakerTimerDisplay=function(a){return q.speakerTimerDisplay=a,q},g=function(a){return a/1e3},f=function(a){return g(a)/60},j=function(a){return 1e3*a},h=function(a){return j(60*a)},q}();